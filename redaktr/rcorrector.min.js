!function(t){"use strict";t.fn.rcorrector=function(e){return this.each(function(){var a=t(this),r=t("<a>",{href:t("base").attr("href")})[0];t.expr[":"].regex=function(e,a,r){var i=r[3].split(","),n=/^(data|css):/,h={method:i[0].match(n)?i[0].split(":")[0]:"attr",property:i.shift().replace(n,"")};return new RegExp(i.join("").replace(/^\s+|\s+$/g,""),"ig").test(t(e)[h.method](h.property))},a.find(":not([id|='lightcase']) a:not(a:regex('href,(^\\/\\/)|(:\\/\\/)|(^javascript:)|(^tel:)|(^mailto:)|(^data:image\\/.*,)|(\\.\\w+((\\?|#).*)?$)'))").each(function(){if(this.href&&this.href!==window.location.origin){var t=new RegExp("^"+r.href),a=this.href.replace(t,"").replace(new RegExp("^"+window.location.origin+"/"),"").split("#");this.href=window.location.origin+(t.test(this.href)?window.location.pathname:e.pathname)+a[0]+window.location.search+(a[1]?"#"+a[1]:"")}}),a.find("a:not([class|='lightcase']):not(a[target=_blank]):not(a:regex('href,(^mailto\\:)|(^tel\\:)|(^data:image\\/.*,)|(\\.\\w+((\\?|#).*)?$)'))").each(function(){t(this).attr("href")&&this.addEventListener("click",function(a){var r=t(a.target).attr("href");r=r||t(a.target).parents("a[href]").attr("href");var i=t("<a>",{href:r});i.prop("search",window.location.search),i.prop("hash")||(history.pushState(null,null,i.prop("href").replace(/\s/g,"_")),t.rhashchange({index:e.index,pathname:e.pathname,xAmzMetaIdentity:e.xAmzMetaIdentity}),a.preventDefault())})})})}}($);